1. Functional Requirements
Authentication & Authorization

Multi-role authentication:

Customer, Worker, Admin, Sales

JWT + HTTP-only cookies for secure sessions.

Role-based access control:

Customers: Limited to their own data.

Workers: Task/project location only (no customer data).

Sales team: Access to potential customers & leads.

Admin: Full access to all entities.

Customer Portal (CRM)

View public product catalog.

Product details with pricing/specifications when logged in.

Request quotations (pre-deal details).

Submit inquiries for sales follow-up.

View past projects linked to their profile.

Sales Team

Manage potential customers:

Track leads across regions (North, South, East, West, Central).

Follow-up system:

Gmail integration (send re-check emails directly).

Track status: new, contacted, follow-up pending, closed.

Convert inquiry â†’ quotation â†’ production â†’ installation (business cycle).

Admin Dashboard

Manage customers, workers, sales team, products, and tasks.

View:

Active customers (with ongoing projects).

Potential customers (signed up, browsing products).

Sales pipeline (quotations, deals).

Import products/tasks via Excel upload.

Full CRUD for products with auto-fill in tasks.

Worker Dashboard

Jira-style Kanban task board:

Columns: Pending, In Progress, Completed, Cancelled.

Project location display (map or text).

Real-time updates.

Comment system for updates.

Priority indicators (low, medium, high, overdue).

Tasks Management

Create, assign, and track tasks.

Product autofill when task relates to a product.

Excel bulk upload for tasks and products.

Real-time updates with WebSockets/React Query polling.

2. Non-Functional Requirements

Scalability: Backend APIs & frontend UI should handle thousands of concurrent users.

Security:

JWT + HTTP-only cookies for authentication.

Input validation & sanitization.

Role-based middleware.

Performance:

API response < 200ms average.

React Query caching for API calls.

Reliability:

Auto-refresh and optimistic UI updates.

Retry mechanism for failed API calls.

Usability:

Mobile-first responsive design.

Accessible UI (WCAG compliance).

Maintainability:

Modular file structure.

TypeScript types for API & frontend.

Clear separation of controllers, models, and routes.

3. Project Structure â€“ Server (Backend)

Tech Stack:

Node.js + Express

MongoDB + Mongoose

JWT Authentication

Multer/Cloudinary (image uploads)

ExcelJS / Papaparse (Excel/CSV import)

KVBserver/
â”œâ”€â”€ index.js                 # Entry point, Express app setup
â”œâ”€â”€ package.json             # Dependencies
â”‚
â”œâ”€â”€ controllers/             # Business logic
â”‚   â”œâ”€â”€ admin.auth.controller.js
â”‚   â”œâ”€â”€ admin.controller.js
â”‚   â”œâ”€â”€ auth.controller.js
â”‚   â”œâ”€â”€ customer.auth.controller.js
â”‚   â”œâ”€â”€ product.controller.js
â”‚   â”œâ”€â”€ task.controller.js
â”‚   â”œâ”€â”€ worker.auth.controller.js
â”‚   â””â”€â”€ sales.controller.js          # NEW: sales team logic
â”‚
â”œâ”€â”€ lib/                     
â”‚   â”œâ”€â”€ cloudinary.js        # Image uploads
â”‚   â”œâ”€â”€ db.js                # MongoDB connection
â”‚   â””â”€â”€ generateToken.js     # JWT generator
â”‚
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ authMiddleware.js
â”‚   â”œâ”€â”€ customerAuthMiddleware.js
â”‚   â”œâ”€â”€ protectRoute.js
â”‚   â”œâ”€â”€ validation.js
â”‚   â””â”€â”€ roleMiddleware.js             # NEW: role-based access
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ admin.model.js
â”‚   â”œâ”€â”€ customer.model.js
â”‚   â”œâ”€â”€ worker.model.js
â”‚   â”œâ”€â”€ sales.model.js               # NEW: sales schema
â”‚   â”œâ”€â”€ product.model.js
â”‚   â”œâ”€â”€ task.model.js
â”‚   â””â”€â”€ quotation.model.js           # NEW: quotations
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ admin.auth.route.js
â”‚   â”œâ”€â”€ admin.route.js
â”‚   â”œâ”€â”€ auth.route.js
â”‚   â”œâ”€â”€ customer.auth.route.js
â”‚   â”œâ”€â”€ product.route.js
â”‚   â”œâ”€â”€ task.route.js
â”‚   â”œâ”€â”€ worker.auth.route.js
â”‚   â””â”€â”€ sales.route.js               # NEW: sales API endpoints
â”‚
â”œâ”€â”€ seeds/
â”‚   â””â”€â”€ seedData.js
â””â”€â”€ utils/
    â”œâ”€â”€ excelParser.js               # NEW: handle Excel uploads
    â”œâ”€â”€ emailService.js              # Gmail integration
    â””â”€â”€ logger.js

4. Project Structure â€“ Frontend

Tech Stack:

React 18 + TypeScript

Tailwind CSS

React Router DOM

React Query (data fetching & caching)

React Hook Form (form handling)

React Beautiful DnD (Kanban board)

Axios (API calls)

XLSX / SheetJS (Excel file parsing)

Google API Client (Gmail integration)

KVB-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          
â”‚   â”‚   â”œâ”€â”€ admin/           
â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerTable.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkerTable.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductManager.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskManager.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SalesManager.tsx         # NEW
â”‚   â”‚   â”œâ”€â”€ worker/          
â”‚   â”‚   â”‚   â”œâ”€â”€ KanbanBoard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ProjectLocation.tsx      # NEW
â”‚   â”‚   â”œâ”€â”€ sales/                       # NEW
â”‚   â”‚   â”‚   â”œâ”€â”€ LeadTable.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LeadForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ FollowUpPanel.tsx
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â”œâ”€â”€ ProductCard.tsx
â”‚   â”‚   â””â”€â”€ ProductModal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ AuthContext.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api.ts                 # Axios setup
â”‚   â”‚   â”œâ”€â”€ excel.ts               # Excel parsing helper
â”‚   â”‚   â””â”€â”€ email.ts               # Gmail API integration
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ AdminDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ WorkerDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ SalesDashboard.tsx       # NEW
â”‚   â”‚   â”œâ”€â”€ CRMPage.tsx
â”‚   â”‚   â”œâ”€â”€ QuotationPage.tsx        # NEW
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx
â”‚   â”‚   â”œâ”€â”€ SignupPage.tsx
â”‚   â”‚   â””â”€â”€ LandingPage.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ product.ts
â”‚   â”‚   â”œâ”€â”€ task.ts
â”‚   â”‚   â””â”€â”€ sales.ts                 # NEW
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â””â”€â”€ index.css
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ assets/ (logos, images)
â”‚
â””â”€â”€ .env


âœ… With this structure:

Server cleanly separates controllers, models, routes, middleware, utils.

Frontend organizes code by role-based dashboards, reusable components, and shared libs.

Supports future scalability (adding more roles/features is straightforward).

API to Frontend Component Mapping
1. Authentication

Backend Routes

POST /api/customer-auth/signup

POST /api/customer-auth/login

POST /api/worker-auth/login

POST /api/admin-auth/login

POST /api/sales-auth/login (future)

POST /api/logout

Frontend Components

pages/LoginPage.tsx â†’ Calls api.customerAuth.login(), api.workerAuth.login(), etc.

pages/SignupPage.tsx â†’ Calls api.customerAuth.signup()

contexts/AuthContext.tsx â†’ Manages login state, role-based auth, refresh/logout.

components/ProtectedRoute.tsx â†’ Blocks unauthorized routes.

2. Products

Backend Routes

GET /api/products â†’ Get all products

GET /api/products/:id â†’ Product details

POST /api/products â†’ Add product (Admin)

PUT /api/products/:id â†’ Update product (Admin)

DELETE /api/products/:id â†’ Delete product (Admin)

POST /api/products/upload-excel â†’ Bulk upload

Frontend Components

components/ProductCard.tsx â†’ Display product in grid/list.

components/ProductModal.tsx â†’ Product details modal.

pages/CRMPage.tsx â†’ Customer product catalog.

components/admin/ProductManager.tsx â†’ Full CRUD UI (Admin).

lib/excel.ts â†’ Parses Excel before upload.

3. Tasks

Backend Routes

GET /api/tasks â†’ List all tasks (role-based filtering).

GET /api/tasks/:id â†’ Task details.

POST /api/tasks â†’ Create new task (Admin).

PUT /api/tasks/:id â†’ Update status/assignee.

DELETE /api/tasks/:id â†’ Remove task.

POST /api/tasks/upload-excel â†’ Bulk upload tasks.

Frontend Components

components/worker/KanbanBoard.tsx â†’ Drag/drop task statuses.

components/worker/TaskCard.tsx â†’ Single task UI.

components/admin/TaskManager.tsx â†’ Admin CRUD for tasks.

components/worker/ProjectLocation.tsx â†’ Shows project location.

lib/excel.ts â†’ Bulk upload tasks.

4. Customers

Backend Routes

GET /api/customers â†’ All customers (Admin only).

GET /api/customers/:id â†’ Specific customer details.

PUT /api/customers/:id â†’ Update customer profile.

DELETE /api/customers/:id â†’ Remove customer.

Frontend Components

components/admin/CustomerTable.tsx â†’ Displays all customers.

pages/CRMPage.tsx â†’ Customerâ€™s own portal view.

pages/QuotationPage.tsx â†’ Customers request pre-deal details.

5. Workers

Backend Routes

GET /api/workers â†’ All workers (Admin only).

POST /api/worker-auth/signup â†’ Add worker.

POST /api/worker-auth/login â†’ Worker login.

PUT /api/workers/:id â†’ Update worker details.

DELETE /api/workers/:id â†’ Remove worker.

Frontend Components

components/admin/WorkerTable.tsx â†’ Admin management of workers.

pages/WorkerDashboard.tsx â†’ Workerâ€™s Kanban + project location.

6. Sales (Future Feature)

Backend Routes

GET /api/sales/leads â†’ List potential customers.

POST /api/sales/leads â†’ Add lead.

PUT /api/sales/leads/:id â†’ Update lead status (new, follow-up, closed).

POST /api/sales/send-email â†’ Gmail follow-up email.

GET /api/sales/quotations â†’ List quotations.

POST /api/sales/quotations â†’ Create quotation.

PUT /api/sales/quotations/:id â†’ Update quotation status.

Frontend Components

pages/SalesDashboard.tsx â†’ Main sales dashboard.

components/sales/LeadTable.tsx â†’ Display potential customers by region.

components/sales/LeadForm.tsx â†’ Add new lead.

components/sales/FollowUpPanel.tsx â†’ Gmail integration + reminders.

pages/QuotationPage.tsx â†’ Sales â†’ Customer quotation flow.

7. Admin Features

Backend Routes

GET /api/admin/overview â†’ Stats + analytics.

GET /api/admin/customers â†’ Customer list.

GET /api/admin/workers â†’ Worker list.

GET /api/admin/sales â†’ Sales performance.

Frontend Components

pages/AdminDashboard.tsx â†’ Aggregates everything (charts, stats).

components/admin/CustomerTable.tsx

components/admin/WorkerTable.tsx

components/admin/ProductManager.tsx

components/admin/TaskManager.tsx

components/admin/SalesManager.tsx

ðŸ”„ API â†” Component Data Flow Example

ðŸ‘‰ Example: Customer requests a product quotation

Customer clicks "Request Quotation" in ProductModal.tsx.

Calls API: POST /api/sales/quotations with {customerId, productId, details}.

Backend saves quotation in quotation.model.js.

Admin sees it in SalesManager.tsx (Admin Dashboard).

Sales team tracks it in QuotationPage.tsx.

ðŸ‘‰ Example: Admin bulk uploads products via Excel

Admin uploads file in ProductManager.tsx.

Frontend parses via lib/excel.ts.

Sends to backend: POST /api/products/upload-excel.

Backend parses with utils/excelParser.js & stores in DB.

Products instantly available in CRMPage.tsx and ProductCard.tsx.

âœ… This mapping ensures:

Every backend API is tied to a frontend consumer.

Sales workflow (inquiry â†’ quotation â†’ installation) is tracked end-to-end.

Easy to present in a project review because it shows full-stack coverage.